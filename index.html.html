<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Un Regalo Especial ❤️</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', 'Times New Roman', serif;
            background: linear-gradient(135deg, #FFF8DC 0%, #FFFACD 50%, #FFEFD5 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            text-transform: lowercase;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(218, 165, 32, 0.2);
            padding: 40px;
            max-width: 600px;
            width: 100%;
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Login Page */
        .login-page {
            text-align: center;
        }

        .login-page h1 {
            color: #DAA520;
            margin-bottom: 10px;
            font-size: 2.5em;
        }

        .login-page .subtitle {
            color: #D4AF37;
            margin-bottom: 20px;
            font-size: 1.1em;
        }

        .romantic-quote {
            color: #8B7355;
            font-style: italic;
            line-height: 1.8;
            margin: 20px 0 30px 0;
            font-size: 1em;
            padding: 20px;
            background: #FFF8DC;
            border-radius: 10px;
            border-left: 4px solid #DAA520;
        }

        .upload-area {
            border: 3px dashed #F0E68C;
            border-radius: 15px;
            padding: 40px;
            margin: 30px 0;
            background: #FFFAF0;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .upload-area:hover {
            border-color: #DAA520;
            background: #FFF8DC;
        }

        .upload-area.dragover {
            border-color: #B8860B;
            background: #FFEFD5;
        }

        .upload-icon {
            font-size: 3em;
            margin-bottom: 15px;
        }

        input[type="file"] {
            display: none;
        }

        .upload-btn {
            background: linear-gradient(135deg, #DAA520, #F0E68C);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 25px;
            font-size: 1.1em;
            cursor: pointer;
            transition: transform 0.2s;
            box-shadow: 0 4px 15px rgba(218, 165, 32, 0.3);
            text-transform: lowercase;
        }

        .upload-btn:hover {
            transform: scale(1.05);
        }

        .error-message {
            color: #B8860B;
            margin-top: 15px;
            display: none;
        }

        /* Main Page */
        .main-page {
            display: none;
        }

        .greeting {
            text-align: center;
            margin-bottom: 30px;
        }

        .greeting h1 {
            color: #DAA520;
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .greeting .time-greeting {
            color: #D4AF37;
            font-size: 1.3em;
        }

        .calendar-title {
            text-align: center;
            color: #DAA520;
            font-size: 1.8em;
            margin: 30px 0 20px 0;
        }

        .advent-calendar {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            overflow-x: auto;
            padding: 10px 0;
        }

        .day-box {
            min-width: 100px;
            height: 120px;
            border-radius: 15px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            flex-shrink: 0;
        }

        .day-box.locked {
            background: linear-gradient(135deg, #E0E0E0, #CCCCCC);
            cursor: not-allowed;
        }

        .day-box.unlocked {
            background: linear-gradient(135deg, #DAA520, #F0E68C);
            box-shadow: 0 5px 15px rgba(218, 165, 32, 0.3);
        }

        .day-box.unlocked:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 20px rgba(218, 165, 32, 0.4);
        }

        .day-box.current {
            background: linear-gradient(135deg, #B8860B, #DAA520);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .day-number {
            font-size: 2em;
            font-weight: bold;
            color: white;
        }

        .day-box.locked .day-number {
            color: #999;
        }

        .day-label {
            font-size: 0.9em;
            color: white;
            margin-top: 5px;
        }

        .day-box.locked .day-label {
            color: #999;
        }

        .lock-icon {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 1.2em;
        }

        .open-gift-btn {
            background: linear-gradient(135deg, #B8860B, #DAA520);
            color: white;
            border: none;
            padding: 20px 50px;
            border-radius: 30px;
            font-size: 1.3em;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 20px rgba(184, 134, 11, 0.4);
            display: block;
            margin: 30px auto;
            font-weight: bold;
            text-transform: lowercase;
        }

        .open-gift-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 25px rgba(184, 134, 11, 0.5);
        }

        .open-gift-btn:disabled {
            background: linear-gradient(135deg, #CCC, #AAA);
            cursor: not-allowed;
            transform: scale(1);
        }

        .playlist-btn {
            background: linear-gradient(135deg, #D4AF37, #F0E68C);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 25px;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 20px rgba(212, 175, 55, 0.4);
            display: block;
            margin: 20px auto;
            font-weight: bold;
            text-transform: lowercase;
        }

        .playlist-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(212, 175, 55, 0.5);
        }

        .gift-description {
            text-align: center;
            color: #666;
            font-style: italic;
            margin-top: 10px;
        }

        /* Gift Page */
        .gift-page {
            display: none;
            text-align: center;
        }

        .gift-page h1 {
            color: #DAA520;
            font-size: 2.2em;
            margin-bottom: 20px;
        }

        .gift-content {
            background: #FFFAF0;
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
        }

        /* Playlist Page */
        .playlist-page {
            display: none;
            text-align: center;
        }

        .playlist-page h1 {
            color: #DAA520;
            font-size: 2em;
            margin-bottom: 20px;
        }

        .playlist-quote {
            color: #8B7355;
            font-style: italic;
            line-height: 1.8;
            margin: 20px auto;
            font-size: 1.1em;
            max-width: 500px;
            padding: 20px;
            background: #FFF8DC;
            border-radius: 10px;
        }

        .spotify-container {
            margin: 30px 0;
            border-radius: 12px;
            overflow: hidden;
        }

        .back-btn {
            background: linear-gradient(135deg, #F0E68C, #FFEFD5);
            color: #8B7355;
            border: none;
            padding: 12px 30px;
            border-radius: 20px;
            font-size: 1em;
            cursor: pointer;
            transition: transform 0.2s;
            margin-top: 20px;
            text-transform: lowercase;
        }

        .back-btn:hover {
            transform: scale(1.05);
        }

        .hearts {
            font-size: 2em;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <!-- Login Page -->
    <div class="container login-page" id="loginPage">
        <h1>bienvenida</h1>
        <p class="subtitle">sube tu boleto especial para continuar</p>
        
        <p class="romantic-quote">
            por más que el día de los enamorados fue el 14, yo te amo todos los días... por eso decidí darte una pequeña muestra de amor dedicada todos los días durante 7 días, te mereces eso y más
        </p>
        
        <div class="upload-area" id="uploadArea">
            <div class="upload-icon">boleto</div>
            <p>arrastra tu boleto aquí o haz clic para seleccionar</p>
            <input type="file" id="fileInput" accept=".pdf">
        </div>
        
        <button class="upload-btn" onclick="document.getElementById('fileInput').click()">
            seleccionar boleto
        </button>
        
        <p class="error-message" id="errorMessage">por favor, sube un archivo pdf válido</p>
    </div>

    <!-- Main Page -->
    <div class="container main-page" id="mainPage">
        <div class="greeting">
            <h1 id="userName">mi amor</h1>
            <p class="time-greeting" id="timeGreeting"></p>
        </div>

        <h2 class="calendar-title">7 días de sorpresas</h2>
        
        <div class="advent-calendar" id="adventCalendar"></div>

        <button class="playlist-btn" onclick="openPlaylist()">
            regalo día 2
        </button>

        <button class="open-gift-btn" id="openGiftBtn" onclick="openTodayGift()">
            abrir regalo día 3
        </button>
        <p class="gift-description" id="giftDescription"></p>
    </div>

    <!-- Playlist Page -->
    <div class="container playlist-page" id="playlistPage">
        <h1>para ti</h1>
        
        <p class="playlist-quote">
            para escuchar y recordarte cuando estés cerca o lejos, para añorarte y para inspirarme; para que tu nombre sin que aparezca en ninguna de ellas, sea el motivo central de todas estas canciones…
        </p>
        
        <div class="spotify-container">
            <iframe data-testid="embed-iframe" style="border-radius:12px" src="https://open.spotify.com/embed/playlist/7dzRPsfX8NuUO4Y7gUCs5j?utm_source=generator&theme=0" width="100%" height="352" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe>
        </div>
        
        <button class="back-btn" onclick="backToMainFromPlaylist()">volver</button>
    </div>

    <!-- Gift Page -->
    <div class="container gift-page" id="giftPage">
        <h1>tu regalo del día <span id="currentDayNumber"></span></h1>
        <div class="hearts"></div>
        
        <div class="gift-content" id="giftContent">
            <!-- Gift content will be loaded here -->
        </div>
        
        <button class="back-btn" onclick="backToMain()">volver</button>
    </div>

    <script>
        // Configuration
        const START_DATE = new Date('2025-02-15'); // Ajusta esta fecha al día 1
        const TOTAL_DAYS = 7;

        // Gift descriptions for each day
        const gifts = {
            1: {
                title: "cena romántica",
                content: "una deliciosa cena juntos para celebrar nuestro amor",
                unlocked: true
            },
            2: {
                title: "sorpresa día 2",
                content: "una playlist especial donde cada canción te tiene como protagonista...",
                unlocked: true
            },
            3: {
                title: "sorpresa día 3",
                content: "algo especial te espera...",
                unlocked: false
            },
            4: {
                title: "sorpresa día 4",
                content: "la emoción continúa...",
                unlocked: false
            },
            5: {
                title: "sorpresa día 5",
                content: "cada día es más especial...",
                unlocked: false
            },
            6: {
                title: "sorpresa día 6",
                content: "casi llegamos al final...",
                unlocked: false
            },
            7: {
                title: "gran final",
                content: "el mejor regalo de todos",
                unlocked: false
            }
        };

        // Login functionality
        const fileInput = document.getElementById('fileInput');
        const uploadArea = document.getElementById('uploadArea');
        const errorMessage = document.getElementById('errorMessage');

        uploadArea.addEventListener('click', () => fileInput.click());

        uploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadArea.classList.add('dragover');
        });

        uploadArea.addEventListener('dragleave', () => {
            uploadArea.classList.remove('dragover');
        });

        uploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadArea.classList.remove('dragover');
            const files = e.dataTransfer.files;
            if (files.length > 0) {
                handleFile(files[0]);
            }
        });

        fileInput.addEventListener('change', (e) => {
            if (e.target.files.length > 0) {
                handleFile(e.target.files[0]);
            }
        });

        function handleFile(file) {
            if (file.type === 'application/pdf') {
                errorMessage.style.display = 'none';
                // Simulate loading
                setTimeout(() => {
                    document.getElementById('loginPage').style.display = 'none';
                    document.getElementById('mainPage').style.display = 'block';
                    initMainPage();
                }, 500);
            } else {
                errorMessage.style.display = 'block';
            }
        }

        // Main page functionality
        function initMainPage() {
            setGreeting();
            createCalendar();
            updateGiftButton();
        }

        function setGreeting() {
            const hour = new Date().getHours();
            const greetingElement = document.getElementById('timeGreeting');
            
            let greeting;
            if (hour >= 5 && hour < 12) {
                greeting = 'buenos días';
            } else if (hour >= 12 && hour < 20) {
                greeting = 'buenas tardes';
            } else {
                greeting = 'buenas noches';
            }
            
            greetingElement.textContent = greeting;
        }

        function getDaysSinceStart() {
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            START_DATE.setHours(0, 0, 0, 0);
            const diffTime = today - START_DATE;
            const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));
            return diffDays + 1; // Day 1 is the start date
        }

        function createCalendar() {
            const calendar = document.getElementById('adventCalendar');
            const currentDay = getDaysSinceStart();
            
            for (let i = 1; i <= TOTAL_DAYS; i++) {
                const dayBox = document.createElement('div');
                dayBox.className = 'day-box';
                
                const isUnlocked = i <= currentDay || gifts[i].unlocked;
                const isCurrent = i === currentDay;
                
                if (isUnlocked) {
                    dayBox.classList.add('unlocked');
                    if (isCurrent) {
                        dayBox.classList.add('current');
                    }
                } else {
                    dayBox.classList.add('locked');
                }
                
                dayBox.innerHTML = `
                    <div class="day-number">${i}</div>
                    <div class="day-label">día ${i}</div>
                    ${!isUnlocked ? '<div class="lock-icon">bloqueado</div>' : ''}
                `;
                
                if (isUnlocked) {
                    dayBox.addEventListener('click', () => openGift(i));
                }
                
                calendar.appendChild(dayBox);
            }
        }

        function updateGiftButton() {
            const currentDay = getDaysSinceStart();
            const btn = document.getElementById('openGiftBtn');
            const desc = document.getElementById('giftDescription');
            
            // Asegurar que currentDay sea un número válido entre 1 y 7
            const dayNumber = Math.min(Math.max(currentDay, 1), TOTAL_DAYS);
            
            if (currentDay <= TOTAL_DAYS && (currentDay <= 2 || gifts[currentDay].unlocked)) {
                btn.style.display = 'block';
                btn.disabled = false;
                btn.textContent = `abrir regalo día ${dayNumber}`;
                desc.textContent = `haz clic para ver tu regalo del día ${dayNumber}`;
            } else {
                btn.style.display = 'none';
                desc.textContent = 'vuelve mañana para tu siguiente sorpresa';
            }
        }

        function openPlaylist() {
            document.getElementById('mainPage').style.display = 'none';
            document.getElementById('playlistPage').style.display = 'block';
        }

        function backToMainFromPlaylist() {
            document.getElementById('playlistPage').style.display = 'none';
            document.getElementById('mainPage').style.display = 'block';
        }

        function openTodayGift() {
            const currentDay = getDaysSinceStart();
            openGift(currentDay);
        }

        function openGift(day) {
            const gift = gifts[day];
            if (!gift) return;
            
            document.getElementById('currentDayNumber').textContent = day;
            document.getElementById('giftContent').innerHTML = `
                <h2 style="color: #DAA520; margin-bottom: 20px;">${gift.title}</h2>
                <p style="font-size: 1.2em; color: #666; line-height: 1.8;">${gift.content}</p>
            `;
            
            document.getElementById('mainPage').style.display = 'none';
            document.getElementById('giftPage').style.display = 'block';
        }

        function backToMain() {
            document.getElementById('giftPage').style.display = 'none';
            document.getElementById('mainPage').style.display = 'block';
        }
    </script>
</body>
</html>